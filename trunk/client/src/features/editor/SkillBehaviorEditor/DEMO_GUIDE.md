# 技能编辑器 - 演示功能说明

## 功能概述

在技能编辑器的右侧上方添加了一个 **🎮 演示** 按钮，点击后可以实时预览当前编辑的技能效果。

## 使用步骤

1. **打开技能编辑器** - 进入技能编辑页面
2. **编辑技能配置** - 在左侧编辑技能分段和事件
3. **点击演示按钮** - 右上方的 "🎮 演示" 按钮
4. **查看演示效果** - 弹窗中会显示：
   - 左侧：实时游戏画布（两个角色）
   - 右侧：演示信息和控制面板

## 演示场景

演示会自动创建一个测试关卡，包含：

- **玩家角色**（阵营 1）- 位于左侧，发动技能
- **敌人角色**（阵营 2）- 位于右侧，接收伤害
- **自动释放** - 关卡加载后自动释放一次技能

## 演示信息面板

右侧面板会显示以下信息：

### 运行状态
- 🟢 绿点闪烁 = 正在运行
- 🔴 红点 = 出错
- ⚫ 灰点 = 就绪

### 运行时间
- 显示演示已运行的秒数
- 精确到 0.01 秒

### 技能信息
- 攻击者：玩家（阵营 1）
- 目标：敌人（阵营 2）
- 伤害值：从配置中读取

### 演示输出
- 显示技能释放结果
- 显示目标剩余生命值
- 显示任何错误信息

## 演示输出示例

### 成功释放
```
✓ 技能已释放！造成 10 伤害
目标剩余生命值: 90 / 100
```

### 技能数据
如果编辑的是伤害类事件，伤害值会从 `event.data.damageValue` 中读取。

## 控制按钮

### ⏸ 暂停/恢复
- 暂停或恢复游戏运行
- 可以观察特定时刻的效果

### 关闭演示
- 关闭演示窗口
- 清理游戏资源

## 关卡配置

演示使用的是自动生成的关卡配置：

```javascript
{
  id: 9999,
  name: '技能演示',
  mapId: 1,
  camps: [
    { id: 1, name: '玩家', playerControlled: true },
    { id: 2, name: '敌人' }
  ],
  startUnits: [
    {
      unitId: 101,
      campId: 1,
      positionName: 'point_0',
      level: 1
    },
    {
      unitId: 101,
      campId: 2,
      positionName: 'point_1',
      level: 1
    }
  ],
  triggers: []
}
```

## 地图配置

演示使用的地图配置：

```javascript
{
  id: 1,
  name: '演示地图',
  width: 100,
  height: 100,
  points: [
    { id: 'point_0', x: 25, y: 50 },  // 玩家起点
    { id: 'point_1', x: 75, y: 50 }   // 敌人起点
  ]
}
```

## 技能演示流程

1. **初始化 World** - 创建 800x600 画布
2. **创建 ClientGameRunner** - 整合游戏逻辑和渲染
3. **加载关卡** - 初始化演示关卡配置
4. **等待 300ms** - 让游戏稳定运行
5. **释放技能** - 攻击者向目标释放一次技能
6. **显示结果** - 在面板中显示伤害结果

## 关键文件

- **DemoPreview.jsx** - 演示弹窗组件
  - 管理游戏生命周期
  - 显示演示信息
  - 处理演示控制

- **SkillBehaviorEditor.jsx** - 编辑器主文件
  - 添加了 `demoPreviewOpen` 状态
  - 添加了 "🎮 演示" 按钮
  - 集成 DemoPreview 组件

## 编辑器按钮位置

在编辑器右侧上方，分段标题右边的三个按钮：
1. 重排ID - 重新排列事件ID
2. 新增事件 - 添加新的技能事件
3. **🎮 演示** ← 新增按钮

## 注意事项

1. **技能伤害** - 演示只支持第一个分段的第一个事件的伤害值
2. **配置加载** - 演示会自动生成所有必需的配置
3. **资源清理** - 关闭演示后会自动清理游戏资源
4. **实时反馈** - 可以立即看到伤害结果

## 未来扩展

可以扩展演示功能支持：
- 多段技能播放
- 特效渲染
- AI 对应响应
- 录制和回放
